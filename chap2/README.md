# 좋은 Test

1. 내부 구현 사항은 테스트 하지 않는다.
2. 재사용성을 높인다.
3. 배포용 코드와 반드시 분리한다.

## 테스트 구조

- 테스트가 수행 되기 이전

  - beforeEach
  - beforeAll

- 테스트가 수행 된 이후

  - afterEach
  - afterAll

- 테스트 수행

  - 준비 (arrange / Given)
  - 실행 (act / When)
  - 검증 (assert / Then)

---

## 테스트 원칙 (FIRST)

1. Fast

- 느린것에 대한 의존성 낮추기
- 파일, DB, 네트워크에 의존하지 않도록 한다. -> mock, stub

2. Isolated

- 최소한의 유닛으로 검증하기
- 독립적이고 집중적으로 유지

3. Repeatable

- 실행할 때마다 동일한 결과를 유지하도록 한다.

4. Self-Validating

- 스스로 결과를 검증하기
- 테스트 코드 안에서 성공 / 실패 여부를 확인할 수 있어야 한다. -> Jest + CI/CD

5. Timely

- 시기적절하게 테스트 코드 작성
- 사용자에게 배포되기 이전에 테스트 코드를 작성한다.

---

## 테스트 조건 (CORRECT)

1. Conformance

- 특정 포멧을 준수하는지
- 전화번호, 이메일, 파일 확장자...

2. Ordering

- 순서 조건을 준수하는지
- 배열의 순서가 중요한 경우

3. Range

- 숫자의 범위
- 인풋이 제한된 범위를 벗어나는 경우

4. Reference

- 외부 의존성 유무, 특정한 조건 유무
- 특정 상황, 상태일 때를 가정하여 동작 수행 여부 확인
- 함수의 선행 실행 등

5. Existence

- 값이 존재하지 않을 경우
- null, undefined, "", 0

6. Cardinality

- 0-1-N 법칙에 따라 검증
- 목록이 없을 때, 하나만 있을 때, 여러개 일 때 확인

7. Time

- 상대, 절대, 동시의 일들
- 순서가 맞지 않을 때, 시간이 지연됐을 때, 지역 시간이 다를 때

---

## 무엇을 테스트 해야 할까 (right-BICEP)

- 모든 요구사항이 정상 작동 하는지 확인한다.

1. Boundary condition

- 모든 코너 케이스에 대해 테스트한다.

- 수의 단위에 따라, 잘못된 인풋, 순서 등 모든 케이스에 대해 테스트한다.

2. Inverse relationship

- 역관계를 적용해서 결과값을 확인한다.
- 덧셈 -> 뺄셈

3. Cross check

- 다른 수단을 이용해서 결과 값이 맞는지 확인한다.
- A 알고리즘 == B 알고리즘

4. Error conditions

- 생각할 수 있는 모든 에러 상황에 대해 테스트한다.
- 네트워크 에러, 메모리 부족, DB 중지

5. Performance characteristics

- 성능 확인은 테스트를 통해 정확한 수치를 확인
- 성능 개선의 척도와 확인도 데이터를 통해
